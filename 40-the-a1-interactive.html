<!DOCTYPE html>
<html>
  <head>
    <title>The A1: the centre of the UK road network</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.15.2/cytoscape.min.js"></script>
    <style>
      #cy {
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0px;
        left: 0px;
      }
    </style>
  </head>
  <body>
    <div id="cy"></div>
    <script>
      d3.json("assets/data/a1.cyjs").then((data) => {
        data.elements.nodes.forEach((element) => {
          const name = element.data.name;
          if (name.startsWith("M")) {
            element.data.colour = "#0079C1";
            element.data.borderColourHighlight = "white";
            element.data.borderWidth = "0px";
          } else if (name.startsWith("A")) {
            element.data.colour = "#00703C";
            element.data.borderColourHighlight = "white";
            element.data.borderWidth = "0px";
          } else if (name.startsWith("B")) {
            element.data.colour = "white";
            element.data.borderColourHighlight = "grey";
            element.data.borderWidth = "2px";
          }
        });
        pos = {
          B6461: { x: 683.45, y: 775.15 },
          A52: { x: 836.8000000000001, y: 817.5 },
          A1140: { x: 657.0999999999999, y: 242.72500000000002 },
          B6347: { x: 358.40000000000003, y: 1042.75 },
          A191: { x: 1157.05, y: 697.6999999999999 },
          A639: { x: 310.775, y: 433.10499999999996 },
          B6474: { x: 348.68, y: 240.04999999999998 },
          A1211: { x: 728.25, y: 283.865 },
          A46: { x: 920.5, y: 434.82 },
          A696: { x: 1011.1, y: 173.5 },
          A6075: { x: 815.5500000000001, y: 97.965 },
          A1200: { x: 221.94, y: 665.1999999999999 },
          A614: { x: 956.9, y: 336.415 },
          B6420: { x: 1079.05, y: 799.8000000000001 },
          A5135: { x: 628.4000000000001, y: 1195.5 },
          A634: { x: 737.2, y: 107.99 },
          A141: { x: 1220.0, y: 520.4 },
          B100: { x: 277.23, y: 961.0500000000001 },
          A7: { x: 405.43, y: 323.435 },
          B1081: { x: 257.385, y: 833.25 },
          A5201: { x: 179.65499999999997, y: 615.8 },
          A167: { x: 959.35, y: 479.975 },
          B661: { x: 932.5, y: 1156.3500000000001 },
          B6438: { x: 983.9, y: 1106.1499999999999 },
          A411: { x: 475.115, y: 1017.9000000000001 },
          A1068: { x: 1170.9, y: 778.5500000000001 },
          A197: { x: 1216.05, y: 893.7 },
          B6354: { x: 448.41, y: 273.77500000000003 },
          A1081: { x: 532.5, y: 274.095 },
          A6105: { x: 754.2, y: 919.05 },
          A1087: { x: 704.35, y: 1145.2 },
          A43: { x: 956.0, y: 652.1500000000001 },
          M25: { x: 417.13500000000005, y: 463.11 },
          A6095: { x: 208.42, y: 782.8499999999999 },
          B6525: { x: 1131.9, y: 411.61 },
          A103: { x: 1265.3, y: 518.75 },
          A1231: { x: 925.9000000000001, y: 906.2 },
          A421: { x: 1183.7, y: 556.0 },
          "A1(M)": { x: 644.25, y: 519.8 },
          B668: { x: 211.195, y: 748.8 },
          B515: { x: 423.525, y: 1112.1 },
          B1220: { x: 368.28499999999997, y: 646.25 },
          B552: { x: 493.23, y: 696.75 },
          A406: { x: 921.35, y: 756.25 },
          A14: { x: 1242.55, y: 619.25 },
          B6370: { x: 168.46, y: 696.4499999999999 },
          A697: { x: 732.3000000000001, y: 415.05 },
          A428: { x: 1167.05, y: 325.21999999999997 },
          A598: { x: 1100.9, y: 959.1500000000001 },
          A607: { x: 1057.5, y: 661.6500000000001 },
          A1167: { x: 321.825, y: 763.45 },
          B1428: { x: 1147.65, y: 625.1 },
          A199: { x: 474.48, y: 807.6 },
          A151: { x: 479.78000000000003, y: 1132.55 },
          B6437: { x: 769.0999999999999, y: 1126.1499999999999 },
          A19: { x: 833.15, y: 457.625 },
          A184: { x: 569.75, y: 194.33499999999998 },
          A900: { x: 407.725, y: 1067.6000000000001 },
          A66: { x: 1146.8000000000002, y: 477.44500000000005 },
          B6403: { x: 378.675, y: 921.8000000000001 },
          B1042: { x: 312.65, y: 1003.45 },
          B1048: { x: 864.9, y: 1007.95 },
          B671: { x: 359.90000000000003, y: 374.38 },
          A504: { x: 997.3000000000001, y: 789.5999999999999 },
          A1201: { x: 1266.65, y: 720.5 },
          B502: { x: 183.95, y: 551.75 },
          A694: { x: 1168.0, y: 994.8000000000001 },
          A57: { x: 917.6, y: 195.24 },
          A603: { x: 1107.85, y: 271.065 },
          A6121: { x: 548.15, y: 910.25 },
          B6349: { x: 453.995, y: 165.27999999999997 },
          A41: { x: 696.4, y: 875.4000000000001 },
          B550: { x: 1073.8500000000001, y: 1046.6 },
          B1043: { x: 935.5500000000001, y: 290.675 },
          A1056: { x: 815.9000000000001, y: 156.21 },
          B1041: { x: 1207.2, y: 370.86 },
          B6363: { x: 875.1999999999999, y: 1084.05 },
          A5109: { x: 559.55, y: 352.365 },
          A104: { x: 570.75, y: 487.03499999999997 },
          B519: { x: 1240.4, y: 835.45 },
          B645: { x: 585.1, y: 1142.9 },
          A6094: { x: 234.675, y: 421.61499999999995 },
          M1: { x: 785.5500000000001, y: 507.95000000000005 },
          A8: { x: 680.15, y: 142.555 },
          B1174: { x: 1081.65, y: 1005.45 },
          B1340: { x: 683.9, y: 1090.1000000000001 },
          A198: { x: 604.8, y: 1093.25 },
          A1000: { x: 755.5, y: 778.85 },
          A401: { x: 295.565, y: 878.25 },
          B1461: { x: 323.41, y: 306.755 },
          A6112: { x: 566.4, y: 1006.3 },
          A698: { x: 348.945, y: 550.0500000000001 },
          A6108: { x: 817.25, y: 1118.95 },
          B658: { x: 534.05, y: 1170.5500000000002 },
          A1175: { x: 415.12, y: 628.55 },
          B6387: { x: 653.0500000000001, y: 90.0 },
          B6317: { x: 1265.85, y: 771.5 },
          A503: { x: 1004.05, y: 575.0500000000001 },
          A5100: { x: 988.8, y: 215.23499999999999 },
          A1: { x: 729.25, y: 649.95 },
          A6085: { x: 1268.55, y: 635.15 },
          A1107: { x: 871.2, y: 1186.7 },
          A162: { x: 250.19, y: 513.05 },
          A40: { x: 597.25, y: 719.3000000000001 },
          A620: { x: 497.27, y: 532.6 },
          A720: { x: 572.1500000000001, y: 385.65 },
          B1318: { x: 1112.5, y: 340.79 },
          B1342: { x: 1033.4, y: 1110.3 },
          B1341: { x: 815.4000000000001, y: 1202.3999999999999 },
          A186: { x: 1022.05, y: 931.7 },
          B1514: { x: 1083.6499999999999, y: 231.64000000000001 },
          A400: { x: 650.65, y: 956.3 },
          A6106: { x: 270.35, y: 616.45 },
          A6055: { x: 456.19, y: 945.45 },
          A501: { x: 412.41999999999996, y: 763.1 },
          A6001: { x: 232.77, y: 906.55 },
          B1337: { x: 972.0, y: 1029.15 },
          A606: { x: 571.1, y: 633.85 },
          B6353: { x: 853.9499999999999, y: 180.565 },
          B1350: { x: 698.7, y: 1204.0 },
          B6045: { x: 418.985, y: 195.06 },
          B1164: { x: 558.35, y: 122.82 },
          B6325: { x: 915.4000000000001, y: 123.42 },
          B6326: { x: 1230.6999999999998, y: 432.79499999999996 },
          A507: { x: 1039.65, y: 377.77 },
          B6079: { x: 267.18, y: 342.31499999999994 },
          B6348: { x: 617.4499999999999, y: 135.07 },
          A69: { x: 843.0, y: 277.59499999999997 },
          A47: { x: 1070.35, y: 877.1500000000001 },
          A638: { x: 629.3, y: 297.54 },
          A605: { x: 868.7, y: 585.45 },
          A692: { x: 1197.8, y: 938.75 },
          B6415: { x: 211.19, y: 477.86499999999995 },
        };
        var cy = cytoscape({
          container: document.getElementById("cy"),
          elements: data.elements,
          style: [
            {
              selector: "node",
              style: {
                shape: "circle",
                "background-color": "data(colour)",
                "border-color": "black",
                "border-width": "data(borderWidth)",
                label: "data(id)",
              },
            },
            {
              selector: "edge",
              style: {
                width: 2,
                opacity: 0.7,
              },
            },
            {
              selector: "node.highlight",
              style: {
                "border-color": "data(borderColourHighlight)",
                "border-width": "2px",
              },
            },
            {
              selector: "node.semitransp",
              style: { opacity: "0.1" },
            },
            {
              selector: "edge.highlight",
              style: { "mid-target-arrow-color": "#FFF" },
            },
            {
              selector: "edge.semitransp",
              style: { opacity: "0.1" },
            },
          ],
          layout: {
            name: "preset",
            positions: pos,
          },
        });

        // https://stackoverflow.com/questions/31510992/how-to-highlight-neighbouring-nodes-in-cytoscape-js
        cy.on("mouseover", "node", function (e) {
          var sel = e.target;
          cy.elements()
            .difference(sel.outgoers().union(sel.incomers()))
            .not(sel)
            .addClass("semitransp");
          sel
            .addClass("highlight")
            .outgoers()
            .union(sel.incomers())
            .addClass("highlight");
        });
        cy.on("mouseout", "node", function (e) {
          var sel = e.target;
          cy.elements().removeClass("semitransp");
          sel
            .removeClass("highlight")
            .outgoers()
            .union(sel.incomers())
            .removeClass("highlight");
        });
      });
    </script>
  </body>
</html>
